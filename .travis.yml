language: cpp
dist: bionic

matrix:
  include:
  - os: linux
    env: COMPILER=g++-8
    addons:
      apt:
        packages:
        - g++-8
        sources:
        - ubuntu-toolchain-r-test
  - os: linux
    env: COMPILER=g++-9
    addons:
      apt:
        packages:
        - g++-9
        sources:
        - ubuntu-toolchain-r-test
  - os: linux
    env: COMPILER=clang
    addons:
      apt:
        packages:
        - clang
        sources:
        - ubuntu-toolchain-r-test

before_install:
- export CXX="${COMPILER}"
- sudo apt-get -qq update
- sudo apt-get install -y libboost-dev
- sudo apt-get install -y witty
install: 

before_script:
- uname -a
script:
- mkdir -p _build && cd _build
  ## codecov.io only supports only c++11 -> disable coverage
- cmake .. -DENABLE_COVERAGE:BOOL=FALSE
- cmake --build . -- -j4 VERBOSE=1
- ctest -j2
## - make gcov

after_script:

after_success:

branches:
  only:
  - master
  - "/^v\\d+\\./"

notifications:
  irc:
    channels:
    - chat.freenode.net#sec21
    template:
    - "%{repository_slug}#%{build_number} (%{branch} - %{commit} : %{author}): %{message}"
    - 'Change view : %{compare_url}'
    - 'Build details : %{build_url}'
